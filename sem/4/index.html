<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <div class="users-wrap">
    <!-- <div class="user">
      <h2 class="user-name"></h2>
      <div class="user-email"></div>
    </div> -->
  </div>

  <script>
    'use strict';

    // 1. Создайте функцию delayedMessage(message, delay),
    // которая принимает аргументы message (строка) и delay
    // (число). Функция должна выводить заданное сообщение в
    // консоль через указанную задержку.

    // 2. Вызовите функцию delayedMessage() три раза с разными
    // сообщениями и задержками.

    // 3. После вызова всех функций delayedMessage(), добавьте
    // сообщение вида "Конец программы" с помощью
    // console.log().

    // let count = 0;
    // function delayedMessage(message, delay) {
    // 	count++;
    // 	setTimeout(function () {
    // 		console.log(message);
    // 		count--;
    // 		if (count === 0) {
    // 			console.log("Конец программы");
    // 		}
    // 	}, delay);
    // }

    // delayedMessage("Сообщение 1", 2000);
    // delayedMessage("Сообщение 2", 1000);
    // delayedMessage("Сообщение 3", 3000);

    // Ожидаемый результат:
    // "Сообщение 2"
    // "Сообщение 1"
    // "Сообщение 3"
    // "Конец программы"




    // 2. У вас есть список задач, которые необходимо выполнить в определенном
    // порядке. Каждая задача должна быть выполнена через определенный
    // промежуток времени, заданный в миллисекундах. Вам необходимо написать
    // функцию, которая принимает список задач и интервал времени, а затем
    // выполняет каждую задачу через определенный промежуток времени.
    // Нельзя использовать setTimeout, выставляя сразу все задачи в очередь.

    // const tasks = [
    //   { name: 'task1', time: 1000 }, // выполнится через 1 сек.
    //   { name: 'task2', time: 2000 }, // выполнится через 3 сек.
    //   { name: 'task3', time: 4000 }, // выполнится через 7 сек.
    // ];

    // let i = 0;

    // function delayedTasks(tasks) {
    //   let task = tasks[i];

    //   setTimeout(function () {
    //     console.log(`${task.name} is completed`);

    //     i++;

    //     if (i < tasks.length) {
    //       delayedTasks(tasks);
    //     }
    //   }, task.time);
    // }

    // delayedTasks(tasks);




    // 3. Напишите программу, которая загружает данные с сервера с
    // использованием функции fetch. Ваша задача — использовать предложенный
    // шаблон запроса для получения данных и их обработки.

    // Создайте функцию, которая отправляет запрос к серверу, используя fetch.
    // Адрес сервера для запроса: https://api.randomdatatools.ru/?count=5 .

    // В функции реализуйте обработку промиса, возвращаемого fetch.
    // Используйте метод.then() для обработки ответа сервера.

    // Проверьте свойство response.ok.
    // Добавьте обработку ошибок с помощью метода.catch().
    // Выведите сообщение об ошибке в консоль, если в процессе выполнения запроса
    // или обработки данных возникли проблемы.

    // function getDataFromServer(url) {
    //   fetch(url)
    //     .then((response) => {
    //       if (!response.ok) {
    //         throw new Error('Network response is not ok');
    //       }
    //       return response.json();
    //     })
    //     .then((data) => {
    //       console.log(data);
    //     })
    //     .catch((error) => {
    //       console.error(error.message);
    //     });
    // }

    // getDataFromServer('https://api.randomdatatools.ru/?count=5');



    // 4. Разработайте простой веб-интерфейс для отображения списка
    // пользователей, получаемого с сервера. Вам необходимо отобразить имена
    // пользователей и их email-адреса.

    // Используйте функцию fetch для отправки GET-запроса
    // к https://jsonplaceholder.typicode.com/users .
    // Этот запрос вернет JSON-массив объектов пользователей.

    // В обработчике .then() преобразуйте полученный ответ в JSON.

    // После успешного получения и преобразования ответа в JSON,
    // отобразите на странице список пользователей. Для каждого пользователя
    // покажите его имя и email. Для отображения можно использовать
    // любой HTML-элемент, например, ul для списка и li для элементов списка.
    // Добавьте базовую обработку ошибок, чтобы в случае неудачного запроса
    // на странице отображалось сообщение об ошибке.

    fetch('https://api.randomdatatools.ru/?count=5')
      .then((response) => {
        if (!response.ok) {
          throw new Error('Network response is not ok');
        }
        return response.json();
      })
      .then((users) => {
        const usersWrap = document.querySelector('.users-wrap');
        usersWrap.innerHTML = '';

        users.forEach(user => {
          const randomUser = document.createElement('div');
          randomUser.classList.add('user');
          randomUser.innerHTML = `
          <h2 class="user-name">${user.FirstName} ${user.LastName}</h2>
          <div class="user-email">${user.Email}</div>
        `;
          usersWrap.append(randomUser);
        });
      })
      .catch((err) => {
        console.error(err.message);
      });

    function displayUser(usersData) {

    }

  </script>
</body>

</html>